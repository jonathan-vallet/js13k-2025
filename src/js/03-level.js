const worldLayers = {
  ground:
    '206,8,48,7,37,8,48,7,37,8,48,7,37,8,48,7,37,8,48,7,,4,32,8,51,,4,,33,,,,3,,4,8,42,,4,,33,19,39,10,,,30,12,,,2,3,39,2,,7,,,30,12,,,3,,51,,11,,18,2,11,,3,,51,,11,,18,15,54,,5,,5,,18,15,52,15,17,16,90,2,93,5,64,19,12,11,57,20,98,2,198,2,98,2,1431,2,97,3,,,94,6,96,2,98,2,49,2,47,2,49,2,98,2,47,6,4,4,25,5,7,6,9,6,33,2,32,,3,,12,,9,6,67,,3,,12,,9,2,71,,2,11,3,,2,9,24,,2,,10,3,5,,37,,3,,2,9,24,,3,2,7,3,6,,37,,3,,34,2,3,2,7,8,,,29,2,6,,3,,34,2,3,2,7,5,32,4,5,2,3,,34,3,2,3,43,,,8,4,,13,3,20,,14,,33,,13,,13,3,8,,27,,32,,13,,14,,9,,27,3,30,15,14,,6,7,24,3,56,7,3,7,26,,56,7,3,7,26,,56,7,3,7,26,3,54,7',
  wall: '0,43,18,40,5,,7,,23,,22,,7,,,,,,,,2,,6,,,,11,2,5,,7,,23,,22,,7,,,,,,,,2,,6,,13,2,5,,7,,23,,22,,7,,,,,,,,2,2,5,,13,2,2,,2,,7,,23,,22,,7,,,,,,,,3,4,,2,2,2,9,2,2,,2,,7,,23,,22,,7,,15,,2,2,9,2,2,,2,,7,,23,,22,,7,,15,,3,,9,2,2,,2,4,,4,8,,5,10,22,4,,4,,2,,3,8,,3,,9,2,2,,2,,16,,5,,8,,22,,10,,12,,3,,9,2,2,,2,,16,,5,,8,3,18,3,10,,11,2,3,,9,2,2,,2,,8,2,,2,3,,5,,8,3,18,3,10,,11,,4,,9,2,2,,2,11,,3,,2,5,,34,9,5,3,3,,4,,9,2,2,,15,,3,7,34,,,,,,,3,,5,,5,,4,9,2,2,,15,,44,,,,,,,,18,,9,2,2,,15,,18,3,18,3,2,,,,,,,,18,,9,2,2,7,2,8,18,3,18,3,2,,,,,,,3,,16,9,2,8,4,25,,22,,2,,,,,,,,28,2,37,,22,,37,2,37,,22,,37,23,2,15,22,29,2,8,20,2,2,2,40,,21,2,2,2,26,2,2,2,40,,21,2,2,2,72,,99,,94,3,,2,94,2,98,2,98,2,98,2,536,,59,5,35,,59,5,35,,8,2,,3,45,5,35,3,11,,85,3,11,3,83,3,97,3,19,2,2,2,45,2,2,2,7,5,9,3,19,2,2,2,45,2,2,2,7,,3,,9,24,2,14,22,13,2,10,3,12,37,,22,,5,,12,,18,2,37,,22,,5,,12,,19,,23,4,3,6,,,22,,2,2,,12,,4,16,,16,3,2,3,2,,8,,,,22,,2,,13,,12,2,3,,3,,6,,,5,3,,6,,2,,8,,,4,,19,2,,13,,12,2,3,,3,,6,,5,2,,2,6,,2,,8,,,,22,,2,6,,4,3,,12,2,3,,3,,6,,5,,10,,2,,8,,,,22,,2,,,,2,,,,6,,,4,8,,3,,3,3,,4,5,,10,,2,,8,,,,22,,2,,4,3,6,,2,,9,2,3,,3,,12,,13,,8,,,,22,,2,,13,,2,,4,4,,2,3,,2,2,12,,13,4,,2,4,,22,,2,,,,8,4,,2,,4,11,3,12,3,,4,,,10,3,2,,22,,2,,,10,,2,,,17,,,4,,4,26,,2,,13,3,,6,2,,15,,9,4,,4,,,7,,26,,2,,13,3,,6,2,,15,,9,,7,,,,7,,26,,2,,12,2,8,,2,5,2,8,,,9,,7,,,,7,,17,8,,,2,,22,,6,4,6,3,9,,7,,,,7,8,2,9,6,,4,,22,,28,,7,,,,7,,6,,2,,14,,4,,22,,28,,7,,,9,5,2,2,2,13,12,4,50,15,2,2,2,24,6',
  water:
    '220,3,16,4,77,3,16,4,72,8,16,4,72,8,16,4,72,7,17,4,74,5,19,2,98,2,89,6,3,2,89,6,3,2,89,2,2,2,3,2,89,2,2,7,89,2,2,7,89,6,3,2,89,6,3,2,89,6,94,6,,4,89,6,,4,96,3,97,3,84,15,30,17,38,15,30,17,36,17,34,6,43,9,369,4,96,4,49,4,43,2,51,4,43,2,50,5,92,10,90,10,90,2,39,3,97,3,97,3,97,7,88,12,88,12,91,9,91,9,310,3,97,3,8,2,6,3,89,2,6,3,89,2,401,2,98,2,98,2,14,7,77,2,14,7,93,3,,3,270,2,98,2,98,2',
  tree: '43,,,,,,,,,,,,,,,,,,155,,,,5,,10,,,,7,,7,,4,,,,16,,18,,28,,10,,19,,40,,29,,7,,8,,9,,3,,,,73,,,,19,,40,,18,,9,,17,,9,,5,,35,,48,,7,,5,,37,,21,,6,,17,,2,,3,,2,,2,,69,,3,,13,,7,,4,,22,,14,,47,,9,,28,,4,,108,,97,,98,,,,14,,17,,14,,,,,,3,,,,,,,,72,,10,,255,,261,,45,,11,,76,,66,,33,,,,14,,6,,51,,,,24,,98,,20,,53,,26,,2,,,,,,,,,,,,,,,,61,,,,,,,,,,,,,,4,,,,2,,17,,3,,,,5,,,,,,,,,,40,,,,5,,,,9,,26,,,,11,,18,,20,,,,13,,,,,,17,,6,,13,,,,5,,,,3,,11,,,,,,19,,2,,6,,42,,3,,,,2,,19,,28,,10,,6,,7,,4,,,,2,,4,,47,,9,,71,,5,,10,,7,,3,,17,,,,,,7,,,,9,,36,,,,3,,,,,,23,,10,,,,,,5,,,,,,14,,17,,5,,10,,11,,17,,22,,22,,,,11,,10,,12,,,,,,7,,,,48,,5,,5,,152,,110,,87,,12,,27,,80,,87,,,,,,,,3,,3,,,,,,,,94,,,,,,100,,35,,,,57,,,,38,,,,98,,5,,95,,5,,16,,53,,20,,12,,34,,5,,7,,39,,58,,13,,3,,20,,46,,,,3,,,,6,,89,,61,,98,,88,,11,,5,,,,98,,80,,45,,,,,,149,,28,,2,,77,,,,11,,2,,72,,20,',
  rock: '201,,17,,81,,99,,74,2,324,,99,,99,,22,,45,,109,,226,2,2,,5,,6,3,73,,99,,111,,48,,63,2,34,,304,2,98,2,661,,,2,4,,189,2,109,,201,,322,,237,,99,2,45,,18,2,525,,98,2,23,,63,2,108,,,,72,,15,,8,,203,,28,,69,2,28,,10,,9,,,2,95,2,88,,12,2,18,,52,,114,,29,,8,2,59,,8,,101,',
  blade: '270,,,,,,11,,908,,122,,46,,,,,,118,,1661,,190,,1423,,225,',
  hole: '724,,99,,99,,3,,95,,3,,73,,21,5,572,,99,,718,2,98,2,98,2,72,,18,,80,,18,3,99,3,65,,,3,16,,79,2,16,3,656,2,98,2,98,2,98,2,250,,3,,275,2,68,,12,2,2,2,11,,69,,16,2,11,2,17,,57,,23,,17,,49,,11,,19,,67,,30,2,67,,73,2,6,3,89,,99,2,12,,86,,98,2,126,3,5,2,71,,,4,94,3',
  spikes: '203,,84,2,13,,84,2,12,,101,2,80,2,16,2,80,2,313,,288,4,409,,99,,2904,,99,,258,,99,2,98,2,,2,439,2',
  bush: '684,,294,,98,2,242,,100,2,168,2,113,,822,2,98,2,355,,99,,80,2,17,,81,,1251,2,13,,99,,99,,497,',
  snow: '445,,99,3,2,3,93,6,96,2,98,2,57,3,52,3,42,3,52,2,153,,98,2,97,3,80,,96,4,21,2,71,3,22,4,70,3,23,2,69,4,29,2,66,2,30,2,748,,99,3,98,2,86,,11,2,39,4,42,2,11,2,30,2,7,,46,,12,3,26,4,67,3,25,3,,2,68,,54,2,54,,43,2,53,3,43,,46,,5,2,91,2,5,2,91,2,44,,53,2,43,2,53,2,43,2,187,2,4,2,92,,503,2,13,3,83,,12,3,254,3,73,,24,2,23,4,46,,24,2,24,3,65,2,3,2,92,4,2,2,98,',
  root: '370,,,,,,95,,105,3,99,,368,5,99,2,106,2,98,3,30,,85,,11,3,172,,99,,98,7,935,2,98,2,99,,205,,98,2,69,2,27,,70,2,27,,116,2,99,,244,4,95,2,2,,99,3,228,2,16,,55,2,99,,129,3,98,,99,,415,,55,3,39,3,56,2,99,,199,,99,,88,3,7,',
  mommy: '693,,83,,12,,93,,1779,,61,,207,,256,,88,,10,,101,,50,,23,,86,,211,,1160,,180,,199,',
  crack: '483,,99,,189,,99,,699,,99,,790,,99,,1045,,99,,1031,,99,,160,,99,,86,,91,,7,,30,,60,,38,,33,,99,,99,',
  checkpoint: '810,,54,,377,,99,,118,2,758,2,66,2,528,2,1301,2,149,2,1318,',
  skeleton: '2367,2,19,,182,,407,,82,,105,,465,,,,,,172,,300,,22,,,,263,,3,,300,,195,,15,,508,,57,,42,,345,2',
  trigger: '2249,,1498,,133,,36,,467,,127,,318,,407,,13,,467,,61,,55,,15,',
  seeker: '3027,,1440,,1096,',
  mushroom: '1717,,99,,997,3,98,2,755,3,100,,145,2,99,2,384,2,58,4,9,,496,,204,,63,,142,2,53,,,,32,,69,,29,,99,,297,2',
  stoneflower:
    '1449,2,98,2,1433,4,16,3,37,2,38,,59,2,169,3,98,2,99,,223,2,98,2,171,2,98,2,131,2,98,2,293,,563,2,17,,81,,17,,21,2,76,,100,,21,2,76,,20,2,106,',
};
let world = decodeLevel(worldLayers);

addSign(34, 24, 'BURN BUSHES AND ENEMIES|WITH FIREBALLS');
addSign(21, 23, '^ WINTER TEMPLE|v SPRING TEMPLE');
addSign(45, 11, '< WINTER TEMPLE|> SUMMER TEMPLE');
addSign(80, 35, 'STAND ON STONE|AND PRESS ACTION');
addSign(74, 25, 'v AUTUMN TEMPLE|> SUMMER TEMPLE');
addSign(73, 37, '< SPRING TEMPLE|v AUTUMN TEMPLE');
addSign(25, 36, 'v SPRING TEMPLE|^ WINTER TEMPLE');

function addSpecificWorldItems() {
  if (!availableSeasons.includes('winter')) {
    addSeasonOrb(10, 4, 'winter', 'IN WINTER, SNOW COVERS|AND WATER TURNS ICE');
  }
  if (!availableSeasons.includes('summer')) {
    addSeasonOrb(65, 4, 'summer', 'IN SUMMER, ROOTS GROW|AND USE VINES TO CLIMB');
  }
  if (!availableSeasons.includes('fall')) {
    addSeasonOrb(94, 57, 'fall', 'IN FALL, MUSHROOM GROW|AND LEAVES FILL HOLES');
  }
  if (!availableSeasons.includes('spring')) {
    addSeasonOrb(4, 57, 'spring', 'IN SPRING, STONE FLOWERS|BLOOM');
  }

  // Add cat list manually to move them when collected and add signs to show where they were found
  let catList = [
    { x: 81, y: 44, text: 'IN AUTUMN TEMPLE', cx: 52, cy: 25 },
    { x: 89, y: 59, text: 'IN AUTUMN TEMPLE', cx: 50, cy: 26 },
    { x: 48, y: 50, text: 'AT SOUTH', cx: 48, cy: 26 },
    { x: 26, y: 47, text: 'IN SPRING TEMPLE', cx: 46, cy: 25 },
    { x: 9, y: 31, text: 'AT WEST', cx: 45, cy: 23 },
    { x: 29, y: 5, text: 'IN WINTER TEMPLE', cx: 45, cy: 21 },
    { x: 35, y: 12, text: 'IN WINTER TEMPLE', cx: 46, cy: 19 },
    { x: 49, y: 4, text: 'AT NORTH', cx: 48, cy: 18 },
    { x: 84, y: 2, text: 'IN SUMMER TEMPLE', cx: 50, cy: 18 },
    { x: 97, y: 2, text: 'IN SUMMER TEMPLE', cx: 52, cy: 19 },
    { x: 62, y: 21, text: 'AT EAST', cx: 53, cy: 21 },
    { x: 85, y: 28, text: 'AT EAST', cx: 53, cy: 23 },
  ];
  catList.forEach((cat, index) => {
    // If cat was already collected, add it as collected (in its corner)
    if (savedData.collectedCatsList.includes(index)) {
      world.push({ tile: 'cat', x: cat.cx, y: cat.cy, _isCollected: true });
    } else {
      world.push({ tile: 'cat', x: cat.x, y: cat.y, cx: cat.cx, cy: cat.cy, i: index });
      addSign(cat.cx, cat.cy, `${cat.text}`);
    }
  });
}

/**
 * Adds a seasonal orb to the level
 * @param {*} x
 * @param {*} y
 * @param {*} season
 */
function addSeasonOrb(x, y, season, text) {
  world.push({ tile: 'orb', x, y, season, text });
}

/**
 * Adds a sign to the level
 * @param {*} x
 * @param {*} y
 * @param {*} text
 */
function addSign(x, y, text) {
  world.push({ tile: 'signpanel', x, y, text }); // Adds a sign tile at the specified coordinates
}
